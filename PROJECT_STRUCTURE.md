# é¡¹ç›®ç»“æ„æ€»ç»“

DiftAgent ç³»ç»Ÿçš„å®Œæ•´é¡¹ç›®ç»“æ„ï¼Œé‡‡ç”¨å‰åç«¯åˆ†ç¦»æ¶æ„ã€‚

## ğŸ—ï¸ æ•´ä½“æ¶æ„

```
diftagent/
â”œâ”€â”€ backend/                 # åç«¯æœåŠ¡ (FastAPI + PostgreSQL)
â”œâ”€â”€ frontend/               # å‰ç«¯åº”ç”¨ (Next.js + TypeScript)
â”œâ”€â”€ docs/                   # é¡¹ç›®æ–‡æ¡£
â”œâ”€â”€ files/                  # é¡¹ç›®èµ„æºæ–‡ä»¶
â””â”€â”€ README.md              # é¡¹ç›®è¯´æ˜
```

## ğŸ“ è¯¦ç»†ç»“æ„

### åç«¯ (Backend)

```
backend/
â”œâ”€â”€ api/                    # API è·¯ç”±æ¨¡å—
â”‚   â”œâ”€â”€ auth/              # è®¤è¯ç›¸å…³ API
â”‚   â”‚   â””â”€â”€ login.py       # ç”¨æˆ·è®¤è¯å’Œæˆæƒ
â”‚   â”œâ”€â”€ documents/         # æ–‡æ¡£ç®¡ç† API
â”‚   â”‚   â””â”€â”€ doc_api.py     # æ–‡æ¡£ CRUD æ“ä½œ
â”‚   â””â”€â”€ health/            # å¥åº·æ£€æŸ¥ API
â”œâ”€â”€ models/                # æ•°æ®æ¨¡å‹
â”‚   â””â”€â”€ models.py          # SQLAlchemy æ¨¡å‹å®šä¹‰
â”œâ”€â”€ tests/                 # æµ‹è¯•æ–‡ä»¶
â”‚   â”œâ”€â”€ test_login.py      # ç™»å½•åŠŸèƒ½æµ‹è¯•
â”‚   â”œâ”€â”€ test_document_api.py # æ–‡æ¡£ API æµ‹è¯•
â”‚   â””â”€â”€ quick_login_test.py # å¿«é€Ÿç™»å½•æµ‹è¯•
â”œâ”€â”€ scripts/               # éƒ¨ç½²å’Œåˆå§‹åŒ–è„šæœ¬
â”‚   â”œâ”€â”€ start_server.py    # æœåŠ¡å™¨å¯åŠ¨è„šæœ¬
â”‚   â””â”€â”€ init_database.py   # æ•°æ®åº“åˆå§‹åŒ–è„šæœ¬
â”œâ”€â”€ config/                # é…ç½®æ–‡ä»¶
â”‚   â””â”€â”€ sql/              # SQL è„šæœ¬
â”œâ”€â”€ main.py               # FastAPI åº”ç”¨å…¥å£
â”œâ”€â”€ routers.py            # è·¯ç”±é…ç½®
â”œâ”€â”€ requirements.txt      # Python ä¾èµ–
â”œâ”€â”€ Dockerfile           # Docker é…ç½®
â””â”€â”€ README.md            # åç«¯è¯´æ˜æ–‡æ¡£
```

### å‰ç«¯ (Frontend)

```
frontend/
â”œâ”€â”€ src/                    # æºä»£ç 
â”‚   â”œâ”€â”€ app/               # Next.js App Router
â”‚   â”‚   â”œâ”€â”€ auth/          # è®¤è¯é¡µé¢
â”‚   â”‚   â”‚   â”œâ”€â”€ login/     # ç™»å½•é¡µé¢
â”‚   â”‚   â”‚   â”œâ”€â”€ signup/    # æ³¨å†Œé¡µé¢
â”‚   â”‚   â”‚   â””â”€â”€ forgot-password/ # å¿˜è®°å¯†ç 
â”‚   â”‚   â”œâ”€â”€ dashboard/     # ä»ªè¡¨æ¿
â”‚   â”‚   â”œâ”€â”€ documents/     # æ–‡æ¡£ç®¡ç†
â”‚   â”‚   â”‚   â””â”€â”€ [docId]/   # æ–‡æ¡£è¯¦æƒ…é¡µé¢
â”‚   â”‚   â”œâ”€â”€ tools/         # å·¥å…·é¡µé¢
â”‚   â”‚   â”œâ”€â”€ globals.css    # å…¨å±€æ ·å¼
â”‚   â”‚   â”œâ”€â”€ layout.tsx     # æ ¹å¸ƒå±€
â”‚   â”‚   â””â”€â”€ page.tsx       # é¦–é¡µ
â”‚   â”œâ”€â”€ components/        # å¯å¤ç”¨ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ ui/           # UI ç»„ä»¶åº“
â”‚   â”‚   â”‚   â”œâ”€â”€ button.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ card.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ input.tsx
â”‚   â”‚   â”‚   â””â”€â”€ separator.tsx
â”‚   â”‚   â””â”€â”€ FloatingInput.tsx
â”‚   â””â”€â”€ lib/              # å·¥å…·åº“
â”‚       â””â”€â”€ utils.ts      # å·¥å…·å‡½æ•°
â”œâ”€â”€ public/               # é™æ€èµ„æº
â”œâ”€â”€ package.json          # é¡¹ç›®é…ç½®
â”œâ”€â”€ tailwind.config.ts    # Tailwind é…ç½®
â”œâ”€â”€ tsconfig.json         # TypeScript é…ç½®
â”œâ”€â”€ next.config.js        # Next.js é…ç½®
â””â”€â”€ README.md            # å‰ç«¯è¯´æ˜æ–‡æ¡£
```

### æ–‡æ¡£ (Docs)

```
docs/
â”œâ”€â”€ api/                   # API æ–‡æ¡£
â”‚   â””â”€â”€ README.md         # API æ–‡æ¡£æ€»è§ˆ
â”œâ”€â”€ deployment/            # éƒ¨ç½²æ–‡æ¡£
â”‚   â””â”€â”€ README.md         # éƒ¨ç½²æŒ‡å—
â”œâ”€â”€ development/           # å¼€å‘æ–‡æ¡£
â”‚   â”œâ”€â”€ README.md         # å¼€å‘æŒ‡å—
â”‚   â””â”€â”€ LOGIN_TEST_README.md # ç™»å½•æµ‹è¯•è¯´æ˜
â””â”€â”€ README.md             # æ–‡æ¡£æ€»è§ˆ
```

### èµ„æºæ–‡ä»¶ (Files)

```
files/
â”œâ”€â”€ dcl/                   # DCL é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ å­¦æ ¡ä¿¡æ¯æŸ¥è¯¢.yml
â”‚   â”œâ”€â”€ ç”³è¯·æ—¶é—´çº¿å®‰æ’ä¸æé†’schedule_reminder.yml
â”‚   â”œâ”€â”€ ç”³è¯·æ—¶é—´çº¿å®‰æ’ä¸æé†’schedule_reminder(copy).yml
â”‚   â””â”€â”€ ç•™å­¦å’¨è¯¢WebAPP.yml
â””â”€â”€ tools/                 # å·¥å…·æ–‡ä»¶
    â”œâ”€â”€ feishu_crud.py
    â”œâ”€â”€ models.py
    â”œâ”€â”€ test_dify.py
    â””â”€â”€ tools.py
```

## ğŸ”„ é‡æ„å‰åå¯¹æ¯”

### é‡æ„å‰
```
diftagent/
â”œâ”€â”€ login.py              # ä¸»åº”ç”¨æ–‡ä»¶
â”œâ”€â”€ doc_api.py            # æ–‡æ¡£ API
â”œâ”€â”€ models.py             # æ•°æ®æ¨¡å‹
â”œâ”€â”€ routers.py            # è·¯ç”±é…ç½®
â”œâ”€â”€ main.py               # åº”ç”¨å…¥å£
â”œâ”€â”€ test_*.py             # æµ‹è¯•æ–‡ä»¶
â”œâ”€â”€ start_server.py       # å¯åŠ¨è„šæœ¬
â”œâ”€â”€ init_database.py      # æ•°æ®åº“åˆå§‹åŒ–
â”œâ”€â”€ requirements.txt      # Python ä¾èµ–
â”œâ”€â”€ Dockerfile           # Docker é…ç½®
â”œâ”€â”€ sql/                 # SQL è„šæœ¬
â”œâ”€â”€ frontend/            # å‰ç«¯åº”ç”¨
â””â”€â”€ README.md           # é¡¹ç›®è¯´æ˜
```

### é‡æ„å
```
diftagent/
â”œâ”€â”€ backend/             # åç«¯æœåŠ¡ (æ¨¡å—åŒ–)
â”‚   â”œâ”€â”€ api/            # API æ¨¡å—
â”‚   â”œâ”€â”€ models/         # æ•°æ®æ¨¡å‹
â”‚   â”œâ”€â”€ tests/          # æµ‹è¯•æ–‡ä»¶
â”‚   â”œâ”€â”€ scripts/        # è„šæœ¬æ–‡ä»¶
â”‚   â”œâ”€â”€ config/         # é…ç½®æ–‡ä»¶
â”‚   â””â”€â”€ README.md       # åç«¯æ–‡æ¡£
â”œâ”€â”€ frontend/           # å‰ç«¯åº”ç”¨ (ä¿æŒä¸å˜)
â”œâ”€â”€ docs/               # å®Œæ•´æ–‡æ¡£ä½“ç³»
â”‚   â”œâ”€â”€ api/           # API æ–‡æ¡£
â”‚   â”œâ”€â”€ deployment/     # éƒ¨ç½²æ–‡æ¡£
â”‚   â””â”€â”€ development/    # å¼€å‘æ–‡æ¡£
â””â”€â”€ README.md          # é¡¹ç›®æ€»è§ˆ
```

## ğŸ“Š é‡æ„ä¼˜åŠ¿

### 1. å‰åç«¯åˆ†ç¦»
- âœ… **æ¸…æ™°åˆ†ç¦»**: åç«¯å’Œå‰ç«¯å®Œå…¨ç‹¬ç«‹
- âœ… **ç‹¬ç«‹éƒ¨ç½²**: å¯ä»¥åˆ†åˆ«éƒ¨ç½²å’Œæ‰©å±•
- âœ… **æŠ€æœ¯æ ˆç‹¬ç«‹**: å„è‡ªä½¿ç”¨æœ€é€‚åˆçš„æŠ€æœ¯æ ˆ

### 2. æ¨¡å—åŒ–æ¶æ„
- âœ… **API æ¨¡å—åŒ–**: æŒ‰åŠŸèƒ½åˆ†ç»„ API è·¯ç”±
- âœ… **æ¨¡å‹åˆ†ç¦»**: æ•°æ®æ¨¡å‹ç‹¬ç«‹ç®¡ç†
- âœ… **æµ‹è¯•ç»„ç»‡**: æµ‹è¯•æ–‡ä»¶æŒ‰åŠŸèƒ½åˆ†ç±»

### 3. æ–‡æ¡£ä½“ç³»
- âœ… **å®Œæ•´æ–‡æ¡£**: APIã€éƒ¨ç½²ã€å¼€å‘æ–‡æ¡£é½å…¨
- âœ… **åˆ†ç±»æ¸…æ™°**: æŒ‰ç”¨é€”åˆ†ç±»æ–‡æ¡£
- âœ… **æ˜“äºç»´æŠ¤**: æ–‡æ¡£ç»“æ„æ¸…æ™°æ˜“è¯»

### 4. å¼€å‘ä½“éªŒ
- âœ… **å¿«é€Ÿå®šä½**: æ–‡ä»¶ç»“æ„æ¸…æ™°ï¼Œæ˜“äºæ‰¾åˆ°
- âœ… **å›¢é˜Ÿåä½œ**: å‰åç«¯å¯ä»¥å¹¶è¡Œå¼€å‘
- âœ… **ä»£ç å¤ç”¨**: æ¨¡å—åŒ–è®¾è®¡ä¾¿äºå¤ç”¨

## ğŸš€ å¿«é€Ÿå¯¼èˆª

### åç«¯å¼€å‘
```bash
cd backend
python scripts/start_server.py
```

### å‰ç«¯å¼€å‘
```bash
cd frontend
npm run dev
```

### æ–‡æ¡£æŸ¥çœ‹
- [é¡¹ç›®æ€»è§ˆ](../README.md)
- [åç«¯æ–‡æ¡£](./backend/README.md)
- [å‰ç«¯æ–‡æ¡£](./frontend/README.md)
- [API æ–‡æ¡£](./docs/api/README.md)
- [éƒ¨ç½²æŒ‡å—](./docs/deployment/README.md)
- [å¼€å‘æŒ‡å—](./docs/development/README.md)

## ğŸ“ ç»´æŠ¤è¯´æ˜

### æ·»åŠ æ–°åŠŸèƒ½
1. **åç«¯**: åœ¨ `backend/api/` ä¸‹åˆ›å»ºæ–°æ¨¡å—
2. **å‰ç«¯**: åœ¨ `frontend/src/app/` ä¸‹æ·»åŠ æ–°é¡µé¢
3. **æ–‡æ¡£**: åœ¨ `docs/` ä¸‹æ›´æ–°ç›¸åº”æ–‡æ¡£

### æ–‡ä»¶å‘½åè§„èŒƒ
- **Python**: ä½¿ç”¨ snake_case
- **TypeScript**: ä½¿ç”¨ camelCase
- **ç»„ä»¶**: ä½¿ç”¨ PascalCase
- **ç›®å½•**: ä½¿ç”¨ kebab-case

### æäº¤è§„èŒƒ
```bash
feat(backend): add new API endpoint
fix(frontend): resolve login issue
docs(api): update API documentation
```

## âœ… é‡æ„å®Œæˆ

é¡¹ç›®ç»“æ„é‡æ„å·²å®Œæˆï¼Œç°åœ¨å…·æœ‰ï¼š
- ğŸ—ï¸ **æ¸…æ™°çš„å‰åç«¯åˆ†ç¦»æ¶æ„**
- ğŸ“ **æ¨¡å—åŒ–çš„æ–‡ä»¶ç»„ç»‡**
- ğŸ“š **å®Œæ•´çš„æ–‡æ¡£ä½“ç³»**
- ğŸš€ **æ˜“äºç»´æŠ¤å’Œæ‰©å±•çš„ç»“æ„**

æ‰€æœ‰åŠŸèƒ½ä¿æŒä¸å˜ï¼Œåªæ˜¯æ–‡ä»¶ç»„ç»‡æ›´åŠ åˆç†ï¼ 